---
dist: trusty
language: node_js
sudo: false
git:
  depth: 5

node_js: lts/*

cache: yarn

jobs:
  include:
    - stage: Tests
      script:
        - yarn lint

    - stage: Deploy Front End
      before_script:
        - '
          git config user.name "Deployment Bot (from Travis CI)" &&
          git config user.email "deploy@travis-ci.org"
          '
      script:
        - yarn run build
      deploy:
        github-token: $GITHUB_TOKEN
        keep-history: true
        local_dir: dist
        provider: pages
        skip_cleanup: true
        target-branch: master
        on:
          branch: boss
